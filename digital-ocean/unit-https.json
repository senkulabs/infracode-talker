{
    "listeners": {
        "*:80": {
            "pass": "routes/redirect"
        },
        "*:443": {
            "pass": "routes/laravel",
            "tls": {
                "certificate": "bundle"
            }
        }
    },
    "routes": {
        "redirect": [
            {
                "match": {
                    "uri": "/.well-known/acme-challenge/*"
                },
                "action": {
                    "share": "/var/www/html/$uri"
                }
            },
            {
                "action": {
                    "return": 301,
                    "location": "https://$host$request_uri"
                }
            }
        ],
        "laravel": [
            {
                "match": {
                    "uri": "/.well-known/acme-challenge/*"
                },
                "action": {
                    "share": "/var/www/html/public$uri"
                }
            },
            {
                "match": {
                    "uri": "!/index.php"
                },
                "action": {
                    "share": "/var/www/html/current/public$uri",
                    "fallback": {
                        "pass": "applications/laravel"
                    }
                }
            }
        ]
    },
    "applications": {
        "laravel": {
            "type": "php",
            "root": "/var/www/html/current/public/",
            "script": "index.php",
            "user": "deployer",
            "group": "deployer"
        }
    }
}